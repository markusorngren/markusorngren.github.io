<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Markus Mouse & Cheese Tracker</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link rel="apple-touch-icon" href="icon.png">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="version-tag">V...</div>
<button id="share-btn" onclick="shareApp()">ğŸ”—</button>

<div id="welcome-overlay">
    <div class="welcome-content">
        <h2>Hej! ğŸ­</h2>
        <p>HjÃ¤lp musen att hitta osten!</p>
        <ul>
            <li>ğŸš—ğŸš¶â†”ï¸ <b>VÃ¤lj fÃ¤rdsÃ¤tt</b></li>
            <li>ğŸ“ <b>VÃ¤lj resmÃ¥l</b> Klicka pÃ¥ kartan eller sÃ¶k</li>
            <li>ğŸ’¡ <b>Via-punkter</b> lÃ¥ngtryck fÃ¶r att lÃ¤gga till eller ta bort</li>
            <li>ğŸ’¾ <b>Spara favoriter</b> lÃ¥ngtryck pÃ¥ en spara-knapp</li>
            <li>ğŸš€ <b>STARTA</b></li>
        </ul>
        <button class="ok-btn" onclick="closeInstructions()">Okej! Jag fÃ¶rstÃ¥r!</button>
    </div>
</div>

<div id="ios-install-prompt" class="hidden">
    <div class="ios-header"><span>ğŸ­ Cheese Tracker</span></div>
    <div class="ios-instructions">Installera appen fÃ¶r att fÃ¥ fullskÃ¤rm och snabb Ã¥tkomst!</div>
    <div class="ios-footer">Tryck pÃ¥ <img src="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/SafariVisualGuide/Art/Action_2x.png" width="20" style="margin: 0 3px;"> och vÃ¤lj <b>"LÃ¤gg till pÃ¥ hemskÃ¤rmen"</b>.</div>
    <button class="close-ios-btn" onclick="this.parentElement.classList.add('hidden')">Kanske senare</button>
</div>

<div id="map-page">
    <div id="map"></div>
    <div class="panel">
        <div id="dist-info">SÃ¶ker din GPS... ğŸ“</div>
        <div class="save-btn-container">
            <button id="btn-0" class="slot-btn" onclick="handleSlotClick(0)"><div class="btn-text-container"><span class="scrolling-text"></span></div></button>
            <button id="btn-1" class="slot-btn" onclick="handleSlotClick(1)"><div class="btn-text-container"><span class="scrolling-text"></span></div></button>
            <button id="btn-2" class="slot-btn" onclick="handleSlotClick(2)"><div class="btn-text-container"><span class="scrolling-text"></span></div></button>
            <button id="btn-3" class="slot-btn" onclick="handleSlotClick(3)"><div class="btn-text-container"><span class="scrolling-text"></span></div></button>
            <button id="mode-btn" class="mode-btn" onclick="toggleTravelMode()">ğŸš—</button>
        </div>
        <div id="search-container" class="hidden">
            <input type="text" id="text-search-input" placeholder="Vart ska vi?">
            <button id="go-btn" onclick="executeTextSearch()">â”</button>
        </div>
        <div class="action-container">
            <button id="start-btn" class="action-btn hidden" onclick="startGame()">STARTA ğŸ§€</button>
            <button id="voice-btn" class="action-btn" onclick="startVoiceSearch()">ğŸ¤ RÃ–ST SÃ–K</button>
            <button id="text-btn" class="action-btn" onclick="toggleSearchUI()">âœTEXT SÃ–K</button> 
            <button id="locate-btn" class="action-btn" onclick="toggleView()">ğŸ¯ HITTA MEJ</button>
        </div>
    </div>
</div>

<div id="game-page" class="hidden">
    <div id="swipe-hint" class="hidden">ğŸ‘ˆ Swipa fÃ¶r karta ğŸ‘‰</div>
    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-top: 10px; z-index: 10000; position: relative; width: 100%;">
        <div id="game-distance-display" class="hidden" style="font-weight: bold; font-size: 0.9rem; background: rgba(255,255,255,0.9); padding: 5px 12px; border-radius: 20px; color: #333;"></div>
        <button style="background:#ff4444; color:white; border-radius: 20px; padding: 6px 15px; font-size: 0.75rem;" onclick="stopGame()">AVBRYT</button>
    </div>
    <div class="apple-grid" id="path"><div id="the-mouse">ğŸ­</div></div>
    <div id="game-map" class="hidden"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="app.js"></script>
</body>
</html>